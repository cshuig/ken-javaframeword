<?xml version="1.0" encoding="utf-8"?>
<view:BaseSimpleContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
						  xmlns:s="library://ns.adobe.com/flex/spark" 
						  xmlns:mx="library://ns.adobe.com/flex/mx" 
						  xmlns:view="com.shine.framework.core.view.*" 
						  creationComplete="{baseTopoContainerComplete()}">
	<view:layout>
		<s:BasicLayout/>
	</view:layout>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import com.shine.topo.util.TopoLinesArrayCollection;
			import com.shine.topo.util.TopoNodeArrayCollection;
			import com.shine.topo.view.BaseInfoContainer;
			import com.shine.topo.view.Line.TopoLine;
			import com.shine.topo.view.node.BaseNodeContainer;
			
			import mx.controls.Alert;
			
			//背景图片
			[Bindable]
			public var topoBackgroupImagePath:String;
			//是否显示背景
			[Bindable]
			public var topoBackgroupPolicy:Boolean=false;
			
			//信息窗口
			public var baseInfoContainer:BaseInfoContainer;
			
			private function baseTopoContainerComplete():void{
				baseInfoContainer=new BaseInfoContainer;
				baseInfoContainer.visible=false;
				baseInfoContainer.width=300;
				this.group.addElement(baseInfoContainer);
			}
			
			//加载所有topo节点
			public function addTopoNodeList(value:TopoNodeArrayCollection):void{
				for each(var node:BaseNodeContainer in value){
					this.addTopoNode(node);
				}
			}
			
			//删除所有topo节点
			public function deleteAllTopoNode():void{
			}
			
			//加载所有topo链路
			public function addTopoLineList(value:TopoLinesArrayCollection):void{
				for each(var line:TopoLine in value){
					this.addTopoLine(line);
				}
			}
			
			//加入topo节点
			public function addTopoNode(value:BaseNodeContainer):void{
				if(value!=null){
					this.group.addElement(value);
					value.infoContainer=this.baseInfoContainer;
					if(value.topoLabel!=null)
						this.group.addElement(value.topoLabel);
				}
			}
			
			//加入连线
			public function addTopoLine(value:TopoLine):void{
				if(value!=null){
					this.group.addElement(value.getLine());
				}
			}
		]]>
	</fx:Script>
	<mx:Image id="backgroupImage" width="{this.width}" height="{this.height}" source="{topoBackgroupImagePath}" visible="{topoBackgroupPolicy}" maintainAspectRatio="false" />
	<s:Scroller id="scroller" width="100%" height="100%">
		<s:Group id="group" clipAndEnableScrolling="true"/>	
	</s:Scroller>
</view:BaseSimpleContainer>
